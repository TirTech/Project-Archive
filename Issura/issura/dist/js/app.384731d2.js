(function(e){function t(t){for(var r,u,c=t[0],i=t[1],a=t[2],d=0,l=[];d<c.length;d++)u=c[d],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&l.push(o[u][0]),o[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(l.length)l.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},s=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-07f63f36":"e744ea48","chunk-0ba70d9f":"78f77468","chunk-2d2086b7":"1ccd54e6","chunk-2d20f5a4":"6968189e","chunk-466f4d4d":"198f8817","chunk-50743edf":"c8efc455","chunk-627ffd38":"5fd06c13","chunk-64de25ca":"d22046e4"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=u(e);var a=new Error;s=function(t){i.onerror=i.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,n[1](a)}o[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/static/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var f=a;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:".container-fluid",attrs:{id:"app"}},[e.darkChecked?n("link",{attrs:{href:e.publicPath+"bootstrap_darkly.min.css",rel:"stylesheet"}}):e._e(),e.darkChecked?e._e():n("link",{attrs:{href:e.publicPath+"bootstrap.min.css",rel:"stylesheet"}}),e.$store.getters.isAuthenticated?n("nav",{staticClass:"navbar navbar-expand navbar-dark bg-dark sticky-top"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e._v("Issura")]),n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[e._v("Home")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/projects"}},[e._v("Projects")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/issues"}},[e._v("Issues")])],1),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:e.logOut}},[e._v("Log Out")])])]),e.nicknameFormShown?e._e():n("span",{staticClass:"text-white px-2"},[e._v(" "+e._s(e.$store.getters.user.nickname)+" ("+e._s(e.$store.getters.user.username)+") "),n("i",{staticClass:"fas fa-edit pl-2 clickable",on:{click:e.showNicknameForm}})]),n("form",{staticClass:"form-inline"},[e.nicknameFormShown?n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],staticClass:"form-control",attrs:{type:"text",id:"nickname"},domProps:{value:e.nickname},on:{input:function(t){t.target.composing||(e.nickname=t.target.value)}}}):e._e(),e.nicknameFormShown?n("button",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.setNickname}},[e._v("Save")]):e._e(),n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.darkChecked,expression:"darkChecked"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"darkSwitch"},domProps:{checked:Array.isArray(e.darkChecked)?e._i(e.darkChecked,null)>-1:e.darkChecked},on:{change:function(t){var n=e.darkChecked,r=t.target,o=!!r.checked;if(Array.isArray(n)){var s=null,u=e._i(n,s);r.checked?u<0&&(e.darkChecked=n.concat([s])):u>-1&&(e.darkChecked=n.slice(0,u).concat(n.slice(u+1)))}else e.darkChecked=o}}}),n("label",{staticClass:"custom-control-label text-white",attrs:{for:"darkSwitch"}},[e._v("Dark Mode")])])])],1):e._e(),n("router-view")],1)},s=[],u=n("f72c"),c={name:"App",mixins:[u["A"]],data:function(){return{darkChecked:!1,publicPath:"/static/",nicknameFormShown:!1,nickname:""}},mounted:function(){var e=this;this.$store.dispatch("checkDarkMode").then((function(t){e.darkChecked=t}))},watch:{darkChecked:function(e,t){this.$store.dispatch("setDarkMode",e)}},methods:{logOut:function(){var e=this;this.$store.dispatch("logOut").then((function(t){console.log(t),e.$router.push("/login")}))},setNickname:function(){var e=this;this.nicknameFormShown=!1,this.updateUser(this.nickname,this.$store.getters.user.id).then((function(){e.$store.dispatch("syncUser")}))},showNicknameForm:function(){this.nickname=this.$store.getters.user.nickname,this.nicknameFormShown=!0}}},i=c,a=n("2877"),d=Object(a["a"])(i,o,s,!1,null,null,null),f=d.exports,l=(n("45fc"),n("d3b7"),n("8c4f")),h=(n("c975"),n("ac1f"),n("1276"),n("eee7"),n("2f62")),m=n("bc3a"),p=n.n(m);r["a"].use(h["a"]);var k=new h["a"].Store({state:{user:null,loggedIn:!1,darkMode:!1},mutations:{SET_USER:function(e,t){e.user=t},SET_LOGGED_IN:function(e,t){e.loggedIn=t},SET_DARK_MODE:function(e,t){e.darkMode=t}},actions:{setDarkMode:function(e,t){e.commit("SET_DARK_MODE",t);var n=new Date;n.setTime(n.getTime()+31536e6);var r="expires="+n.toUTCString();document.cookie="issura_dark_mode="+t+";"+r+";path=/"},checkDarkMode:function(e){var t="issura_dark_mode=",n=document.cookie.split(";"),r=0;for(r=0;r<n.length;r++){var o=n[r].trimStart();if(0===o.indexOf(t))return e.commit("SET_DARK_MODE","true"===o.substring(t.length)),"true"===o.substring(t.length)}return!1},checkLoggedIn:function(e){return p.a.get("signin").then((function(e){var t=e.data["id"];return p.a.get("users/"+t)})).then((function(t){return e.commit("SET_USER",t.data),e.commit("SET_LOGGED_IN",!0),!0})).catch((function(e){return console.log("Not logged in: "+e),!1}))},logIn:function(e,t){return p.a.post("signin",t).then((function(t){e.commit("SET_LOGGED_IN",!0);var n=t.data["id"];return p.a.get("users/"+n)})).then((function(t){return e.commit("SET_USER",t.data),!0})).catch((function(e){console.error(e.response)}))},syncUser:function(e){return p.a.get("users/"+e.state.user.id).then((function(t){return e.commit("SET_USER",t.data),!0}))},logOut:function(e){return p.a.delete("signin").then((function(){return e.commit("SET_LOGGED_IN",!1),e.commit("SET_USER",null),!0})).catch((function(e){return console.error(e.response),!1}))}},getters:{isAuthenticated:function(e){return e.loggedIn},user:function(e){return e.user},darkModeOn:function(e){return e.darkMode}},modules:{}});r["a"].use(l["a"]);var g=[{path:"/home",name:"home",alias:"/",component:function(){return n.e("chunk-627ffd38").then(n.bind(null,"7277"))},meta:{requiresAuth:!0}},{path:"/login",name:"login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))},meta:{requiresAuth:!1}},{path:"/projects",name:"projects",component:function(){return n.e("chunk-50743edf").then(n.bind(null,"acca"))},meta:{requiresAuth:!0}},{path:"/issues",name:"issues",component:function(){return n.e("chunk-466f4d4d").then(n.bind(null,"0ccb"))},meta:{requiresAuth:!0}},{path:"/project/:id",name:"project",component:function(){return n.e("chunk-07f63f36").then(n.bind(null,"07bd"))},meta:{requiresAuth:!0}},{path:"/project/:projectId/issue/:id",name:"issue",component:function(){return n.e("chunk-64de25ca").then(n.bind(null,"1b10"))},meta:{requiresAuth:!0}},{path:"/project/:projectId/issueStatuses",name:"issueStatus",component:function(){return n.e("chunk-0ba70d9f").then(n.bind(null,"b236"))},meta:{requiresAuth:!0}},{path:"*",name:"404",component:function(){return n.e("chunk-2d20f5a4").then(n.bind(null,"b2ec"))},meta:{requiresAuth:!1}}],v=new l["a"]({routes:g});v.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))&&!k.getters.isAuthenticated?n("/login"):n()}));var b=v;r["a"].config.productionTip=!1,p.a.defaults.withCredentials=!0,new r["a"]({router:b,store:k,render:function(e){return e(f)}}).$mount("#app")},f72c:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return i})),n.d(t,"z",(function(){return d})),n.d(t,"x",(function(){return f})),n.d(t,"w",(function(){return l})),n.d(t,"A",(function(){return h})),n.d(t,"y",(function(){return m})),n.d(t,"r",(function(){return k})),n.d(t,"k",(function(){return g})),n.d(t,"q",(function(){return v})),n.d(t,"l",(function(){return b})),n.d(t,"u",(function(){return j})),n.d(t,"n",(function(){return w})),n.d(t,"s",(function(){return _})),n.d(t,"t",(function(){return S})),n.d(t,"j",(function(){return C})),n.d(t,"o",(function(){return E})),n.d(t,"b",(function(){return M})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return P})),n.d(t,"c",(function(){return x})),n.d(t,"f",(function(){return A})),n.d(t,"v",(function(){return D})),n.d(t,"e",(function(){return T})),n.d(t,"m",(function(){return U})),n.d(t,"p",(function(){return F}));n("a4d3"),n("e01a"),n("d28b"),n("4160"),n("d81d"),n("4ec9"),n("d3b7"),n("3ca3"),n("498a"),n("159b"),n("ddb0");var r=n("bc3a"),o=n.n(r),s=function(e){return o.a.delete(e).then((function(e){return e.status})).catch((function(e){throw console.log("Delete Failed: "+e),new Error(e)}))},u={methods:{deleteComment:function(e,t,n){return s("projects/"+e+"/issues/"+t+"/comments/"+n)}}},c={methods:{deleteLinkedIssue:function(e,t,n){return s("projects/"+e+"/issues/"+t+"/linkedIssues/"+n)}}},i={methods:{deleteProjectMember:function(e){return s("projectMembers/"+e)}}},a=function(e,t){return o.a.put(e,t).then((function(){return!0})).catch((function(e){throw console.log("Update failed: "+e),new Error(e)}))},d={methods:{updateProject:function(e,t,n,r,o){return a("projects/"+e,{name:t,description:n,status:r,ownerId:o})}}},f={methods:{updateIssue:function(e,t,n,r,o,s,u){return a("projects/"+o+"/issues/"+u,{title:e,description:t,statusId:n,assigneeId:r,type:s,projectId:o})}}},l={methods:{updateComment:function(e,t,n,r){return a("projects/"+e+"/issues/"+t+"/comments/"+n,{text:r})}}},h={methods:{updateUser:function(e,t){return a("users/"+t,{nickname:e})}}},m={methods:{updateIssueStatus:function(e,t,n,r){return a("issueStatuses/"+t,{projectId:e,color:n,name:r})}}},p=function(e){return o.a.get(e).then((function(e){return e.data})).catch((function(e){throw 404===e.response.status?console.log("Resource did not exist: "+e):console.error("Fetch Failed: "+e),new Error(e)}))},k={methods:{fetchUser:function(e){return p("users/"+e)}}},g={methods:{fetchIssue:function(e,t){return p("projects/"+e+"/issues/"+t)}}},v={methods:{fetchProject:function(e){return p("projects/"+e)}}},b={methods:{fetchIssueStatus:function(e){return p("issueStatuses/"+e)}}},I=function(e){return o.a.get(e).then((function(e){return e.data})).catch((function(e){throw console.error("Fetch Failed: "+e),new Error(e)}))},j={methods:{fetchUsers:function(){return I("users")}}},w={methods:{fetchIssues:function(e){return I("projects/"+e+"/issues")}}},_={methods:{fetchUserIssues:function(e){return I("users/"+e+"/issues")}}},S={methods:{fetchUserProjects:function(e){return I("users/"+e+"/projects")}}},C={methods:{fetchComments:function(e,t){return I("projects/"+e+"/issues/"+t+"/comments")}}},E={methods:{fetchLinkedIssues:function(e,t){return I("projects/"+e+"/issues/"+t+"/linkedIssues")}}},y=function(e,t){return o.a.post(e,t).then((function(e){return o.a.get(e.data.uri)})).then((function(e){return e.data})).catch((function(e){throw console.log("Create failed: "+e),new Error(e)}))},M={methods:{createIssue:function(e,t,n,r,o,s,u){return y("projects/"+s+"/issues",{title:e,description:t,statusId:n,creatorId:r,assigneeId:o,type:u,projectId:s})}}},O={methods:{createComment:function(e,t,n,r){return y("projects/"+e+"/issues/"+t+"/comments",{issueId:t,text:n,creatorId:r})}}},P={methods:{createLinkedIssue:function(e,t,n,r){return y("projects/"+e+"/issues/"+t+"/linkedIssues",{parentIssueId:r?n:t,childIssueId:r?t:n})}}},x={methods:{createIssueStatus:function(e,t,n,r){return y("issueStatuses",{projectId:e,typeCode:t,color:n,name:r})}}},A={methods:{createProjectMember:function(e,t){return y("projectMembers",{projectId:e,userId:t})}}},D={methods:{fetchUsersForProject:function(e){var t={project:e};return o.a.get("projectMembers",{params:t}).then((function(e){var t=e.data,n=new Map;t.forEach((function(e){return n.set(e.userId,e.id)}));var r=t.map((function(e){return o.a.get("users/"+e.userId)}));return Promise.all(r).then((function(e){return e.map((function(e){var t=e.data;return t["projectMemberId"]=n.get(t.id),t}))}))})).catch((function(e){throw console.error("Error retrieving users: "+e),new Error(e)}))}}},T={methods:{createProject:function(e,t,n,r){var s={name:e,description:t,status:n,ownerId:r},u=null;return o.a.post("projects",s).then((function(e){return o.a.get(e.data.uri)})).then((function(e){return u=e.data,o.a.post("projectMembers",{projectId:e.data.id,userId:r})})).then((function(e){return{projectMember:e.data.uri,project:u}})).catch((function(e){throw console.log("Create failed: "+e),new Error(e)}))}}},U={methods:{fetchIssueStatuses:function(e,t){var n={};return null!=e&&e>=0&&(n.project=e),t&&0!==t.trim().length&&(n.type=t),o.a.get("issueStatuses",{params:n}).then((function(e){return e.data})).catch((function(e){throw console.error("Error retrieving Issue Statuses: "+e),new Error(e)}))}}},F={methods:{fetchLinkedIssuesFlattened:function(e,t){return o.a.get("projects/"+e+"/issues/"+t+"/linkedIssues").then((function(n){var r=n.data;if(0===r.length)return[];var s=new Map,u=[],c=!0,i=!1,a=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var l=d.value;l.parentIssueId===t?(s.set(l.childIssueId,{isDependant:!0,id:l.id}),u.push(o.a.get("projects/"+e+"/issues/"+l.childIssueId))):(s.set(l.parentIssueId,{isDependant:!1,id:l.id}),u.push(o.a.get("projects/"+e+"/issues/"+l.parentIssueId)))}}catch(h){i=!0,a=h}finally{try{c||null==f.return||f.return()}finally{if(i)throw a}}return Promise.all(u).then((function(e){return e.map((function(e){var t=e.data;return t["isDependant"]=s.get(t.id)["isDependant"],t["linkedIssueId"]=s.get(t.id)["id"],t}))})).catch((function(e){throw console.error("Error fetching issue during linked issue flatten: "+e),new Error(e)}))})).catch((function(e){throw console.error("Error retrieving linked issues: "+e),new Error(e)}))}}}}});
//# sourceMappingURL=app.384731d2.js.map